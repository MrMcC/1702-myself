<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>使用单例封装表单数据提交</title>
    <script type="text/javascript" src="js/my_ajax.js"></script>
</head>
<body>
<form action="#" method="post" id="form">
    用户:<input type="text" name="user"><br>
    密码:<input type="password" name="pwd"><br>
    <input type="submit">
</form>
<div id="result"></div>
<script>
    var submitObj = {
        formId : "form",
        resultId : "result",
        init(){
            this.form = document.getElementById(this.formId);
            this.result = document.getElementById(this.resultId);
            var that = this;
            this.form.onsubmit = function (e){
                e.preventDefault();
                if(that.checkInput()){
                    that.ajax();
                }else{
                    //
                }
            }
        },
        checkInput(){
        	//验证表单输入对错
            return true;
        },
        ajax(){
            var that = this; 
            ajax.post("01_单例设计模式.html",function(result){
                    that.showResult(result);
            },1,new FormData(that.form))
        },
        showResult(result){
            this.result.innerHTML = result;
        }
    }
    submitObj.init();
</script>
</body>
</html>